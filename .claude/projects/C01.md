# C01: Orchestrator Architecture

**Thesis**: Stored in Qdrant (parent_id: 24904b83-e706-4255-962f-4d490398b0c2)
**Priority**: High
**Status**: done

## Overview
Design Claude-as-Orchestrator architecture where Gemini workers handle research/generation tasks.

## Tasks
- [x] Generate thesis via lineage-consult (gemini-3-flash-preview)
- [x] Store to Qdrant (18 chunks, 4,650 words)
- [x] Document key findings

## Consultation Results

**Model**: gemini-3-flash-preview
**Session**: c01-orchestrator-2026-01-16
**Parent ID**: 24904b83-e706-4255-962f-4d490398b0c2

### Primary Recommendation
Implement a strict state-machine for task status in Qdrant to ensure idempotent retries and prevent redundant Gemini calls during rate-limit events.

### Key Architectural Insights

**Intelligence-Throughput Paradox**: Claude's reasoning power + Gemini's throughput solves the constraint where high-intelligence models are rate-limited while high-throughput models lack executive function.

**Atomic Decomposition**: Claude decomposes vague goals into self-contained research units, enabling parallelism across 120 RPM (60 RPM x 2 accounts).

**Lineage Pattern**: Every fact traces back to its source via unique task IDs, enabling verification and incremental research.

**Semantic Memory Stack**: Qdrant + Ollama + Claude creates context-aware retrieval where the orchestrator queries for summaries rather than raw data.

### Core Chunks
- The Necessity of Orchestration in Distributed AI
- Semantic Memory: The Role of Qdrant and Ollama
- Strategic Delegation & Decomposition
- Dual-Account Rotation & Rate Limiting
- Claude Opus Executive Reasoning
- Gemini High-Throughput Workers

### Implementation Phases
1. **Foundation & Connectivity** - Rotation script, Qdrant schema, Ollama benchmarking
2. **Orchestration Logic** - Executive prompt development, state tracker
3. **Worker Optimization** - Worker prompt engineering, batch vectorization
4. **Synthesis & QA** - Multi-pass synthesis loop, lineage verification

## Retrieval
```bash
python ~/.claude/scripts/qdrant-peek.py fetch -c lineage_research --ids "24904b83-e706-4255-962f-4d490398b0c2"
```

## Handoff
Complete. Comprehensive orchestration architecture stored in Qdrant. Key patterns already implemented in L-series (L08 health monitor, L13 task distribution).

---
**Started**: 2026-01-16
**Completed**: 2026-01-16
**Owner**: @claude
