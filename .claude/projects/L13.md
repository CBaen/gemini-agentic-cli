# L13: Subagent Task Distribution

**Priority**: Medium
**Status**: done

## Overview
Patterns for efficiently distributing tasks to subagents.

## Problem
- When to use which subagent type
- How to parallelize vs serialize tasks
- Optimal model selection (Haiku vs Sonnet vs Opus)

## Tasks
- [x] Document subagent selection criteria
- [x] Define parallelization rules
- [x] Create model selection guide

## Results

### Subagent Selection Guide

| Task Type | Subagent | Model | Why |
|-----------|----------|-------|-----|
| Research (Gemini) | general-purpose | haiku | Cheap supervisor for Gemini calls |
| Codebase exploration | Explore | default | Optimized for file search |
| Code review | security-reviewer | default | Specialized prompts |
| Planning | Plan | default | Architecture focus |
| Simple file ops | general-purpose | haiku | Cost-effective |

### Parallelization Rules

**Parallelize when:**
- Tasks are independent (no data dependencies)
- Different files/resources
- Read-only operations

**Serialize when:**
- Tasks depend on previous results
- Writing to same file
- Rate-limited resources (Gemini: serialize with delays)

### Model Selection

| Model | Cost | Use For |
|-------|------|---------|
| haiku | $ | Supervisors, simple tasks, coordination |
| sonnet | $$ | Complex reasoning, default for most agents |
| opus | $$$ | Critical decisions, rarely needed for subagents |

**Rule of thumb:** Start with Haiku for subagent supervisors. Escalate only if quality issues.

### Research Swarm Pattern (from lineage-consult)

```
Task tool:
  subagent_type: "general-purpose"
  model: "haiku"
  prompt: |
    Run multiple Gemini calls sequentially.
    5s delays between calls.
    Store all to Qdrant.
    Return only coordinates.
```

One Haiku manages many Gemini calls without burning Opus context.

## Handoff
Complete. Distribution patterns documented. Key insight: Haiku supervisors for Gemini swarms.

---
**Started**: 2026-01-16
**Completed**: 2026-01-16
**Owner**: @claude
